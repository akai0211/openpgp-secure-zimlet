!function(a){"use strict";function b(a){function b(){return ya>xa}function c(){return wa[xa]}function d(){return xa}function f(a){xa=a}function g(){xa+=1}function h(){xa=0,ya=wa.length}function i(a,b){return{name:a,tokens:b||"",semantic:b||"",children:[]}}function j(a,b){var c;return null===b?null:(c=i(a),c.tokens=b.tokens,c.semantic=b.semantic,c.children.push(b),c)}function k(a,b){return null!==b&&(a.tokens+=b.tokens,a.semantic+=b.semantic),a.children.push(b),a}function l(a){var d;return b()?(d=c(),a(d)?(g(),i("token",d)):null):null}function m(a){return function(){return j("literal",l(function(b){return b===a}))}}function n(){var a=arguments;return function(){var b,c,e,g;for(g=d(),c=i("and"),b=0;b<a.length;b+=1){if(e=a[b](),null===e)return f(g),null;k(c,e)}return c}}function o(){var a=arguments;return function(){var b,c,e;for(e=d(),b=0;b<a.length;b+=1){if(c=a[b](),null!==c)return c;f(e)}return null}}function p(a){return function(){var b,c;return c=d(),b=a(),null!==b?b:(f(c),i("opt"))}}function q(a){return function(){var b=a();return null!==b&&(b.semantic=""),b}}function r(a){return function(){var b=a();return null!==b&&b.semantic.length>0&&(b.semantic=" "),b}}function s(a,b){return function(){var c,e,g,h,j;for(h=d(),c=i("star"),g=0,j=void 0===b?0:b;null!==(e=a());)g+=1,k(c,e);return g>=j?c:(f(h),null)}}function t(a){function b(a){return" "===a||"	"===a||"\r"===a||"\n"===a}var c,d;for(d="",c=0;c<a.length;c+=1)b(a[c])&&b(a[c+1])||(d+=a[c]);return b(d[0])&&(d=d.substring(1)),b(d[d.length-1])&&(d=d.substring(0,d.length-1)),d}function u(a){return a.charCodeAt(0)>=128}function v(){return j("cr",m("\r")())}function w(){return j("crlf",n(v,z)())}function x(){return j("dquote",m('"')())}function y(){return j("htab",m("	")())}function z(){return j("lf",m("\n")())}function A(){return j("sp",m(" ")())}function B(){return j("vchar",l(function(b){var c=b.charCodeAt(0),d=c>=33&&126>=c;return a.rfc6532&&(d=d||u(b)),d}))}function C(){return j("wsp",o(A,y)())}function D(){var a=j("quoted-pair",o(n(m("\\"),o(B,C)),ha)());return null===a?null:(a.semantic=a.semantic[1],a)}function E(){return j("fws",o(ja,n(p(n(s(C),q(w))),s(C,1)))())}function F(){return j("ctext",o(function(){return l(function(b){var c=b.charCodeAt(0),d=c>=33&&39>=c||c>=42&&91>=c||c>=93&&126>=c;return a.rfc6532&&(d=d||u(b)),d})},fa)())}function G(){return j("ccontent",o(F,D,H)())}function H(){return j("comment",n(m("("),s(n(p(E),G)),p(E),m(")"))())}function I(){return j("cfws",o(n(s(n(p(E),H),1),p(E)),E)())}function J(){return j("atext",l(function(b){var c=b>="a"&&"z">=b||b>="A"&&"Z">=b||b>="0"&&"9">=b||["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"].indexOf(b)>=0;return a.rfc6532&&(c=c||u(b)),c}))}function K(){return j("atom",n(r(p(I)),s(J,1),r(p(I)))())}function L(){var a,b;return a=j("dot-atom-text",s(J,1)()),null===a?a:(b=s(n(m("."),s(J,1)))(),null!==b&&k(a,b),a)}function M(){return j("dot-atom",n(q(p(I)),L,q(p(I)))())}function N(){return j("qtext",o(function(){return l(function(b){var c=b.charCodeAt(0),d=33===c||c>=35&&91>=c||c>=93&&126>=c;return a.rfc6532&&(d=d||u(b)),d})},ga)())}function O(){return j("qcontent",o(N,D)())}function P(){return j("quoted-string",n(q(p(I)),q(x),s(n(p(r(E)),O)),p(q(E)),q(x),q(p(I)))())}function Q(){return j("word",o(K,P)())}function R(){return j("phrase",o(ia,s(Q,1))())}function S(){return j("address",o(T,W)())}function T(){return j("mailbox",o(U,da)())}function U(){return j("name-addr",n(p(X),V)())}function V(){return j("angle-addr",o(n(q(p(I)),m("<"),da,m(">"),q(p(I))),ka)())}function W(){return j("group",n(X,m(":"),p($),m(";"),q(p(I)))())}function X(){return j("display-name",function(){var a=R();return null!==a&&(a.semantic=t(a.semantic)),a}())}function Y(){return j("mailbox-list",o(n(T,s(n(m(","),T))),na)())}function Z(){return j("address-list",o(n(S,s(n(m(","),S))),oa)())}function $(){return j("group-list",o(Y,q(I),pa)())}function _(){return j("local-part",o(qa,M,P)())}function aa(){return j("dtext",o(function(){return l(function(b){var c=b.charCodeAt(0),d=c>=33&&90>=c||c>=94&&126>=c;return a.rfc6532&&(d=d||u(b)),d})},sa)())}function ba(){return j("domain-literal",n(q(p(I)),m("["),s(n(p(E),aa)),p(E),m("]"),q(p(I)))())}function ca(){return j("domain",function(){var b=o(ra,M,ba)();return a.rejectTLD&&b.semantic.indexOf(".")<0?null:b}())}function da(){return j("addr-spec",n(_,m("@"),ca)())}function ea(){return a.strict?null:j("obs-NO-WS-CTL",l(function(a){var b=a.charCodeAt(0);return b>=1&&8>=b||11===b||12===b||b>=14&&31>=b||127===b}))}function fa(){return a.strict?null:j("obs-ctext",ea())}function ga(){return a.strict?null:j("obs-qtext",ea())}function ha(){return a.strict?null:j("obs-qp",n(m("\\"),o(m("\x00"),ea,z,v))())}function ia(){return a.strict?null:j("obs-phrase",n(Q,s(o(Q,m("."),r(I))))())}function ja(){return a.strict?null:j("obs-FWS",s(n(q(p(w)),C),1)())}function ka(){return a.strict?null:j("obs-angle-addr",n(q(p(I)),m("<"),la,da,m(">"),q(p(I)))())}function la(){return a.strict?null:j("obs-route",n(ma,m(":"))())}function ma(){return a.strict?null:j("obs-domain-list",n(s(o(q(I),m(","))),m("@"),ca,s(n(m(","),q(p(I)),p(n(m("@"),ca)))))())}function na(){return a.strict?null:j("obs-mbox-list",n(s(n(q(p(I)),m(","))),T,s(n(m(","),p(n(T,q(I))))))())}function oa(){return a.strict?null:j("obs-addr-list",n(s(n(q(p(I)),m(","))),S,s(n(m(","),p(n(S,q(I))))))())}function pa(){return a.strict?null:j("obs-group-list",n(s(n(q(p(I)),m(",")),1),q(p(I)))())}function qa(){return a.strict?null:j("obs-local-part",n(Q,s(n(m("."),Q)))())}function ra(){return a.strict?null:j("obs-domain",n(K,s(n(m("."),K)))())}function sa(){return a.strict?null:j("obs-dtext",o(ea,D)())}function ta(a,b){var c,d,e;if(null===b||void 0===b)return null;for(d=[b];d.length>0;){if(e=d.shift(),e.name===a)return e;for(c=0;c<e.children.length;c+=1)d.push(e.children[c])}return null}function ua(a,b){var c,d,e,f;if(null===b||void 0===b)return null;for(d=[b],f=[];d.length>0;)for(e=d.shift(),e.name===a&&f.push(e),c=0;c<e.children.length;c+=1)d.push(e.children[c]);return f}function va(b){function c(a){return null!==a?a.semantic:null}var d,e,f,g,h,i,j,k;if(null===b)return null;for(e={ast:b},f=ua("address",b),e.addresses=[],d=0;d<f.length;d+=1)g=f[d],h=ta("display-name",g),i=ta("addr-spec",g),j=ta("local-part",i),k=ta("domain",i),e.addresses.push({node:g,parts:{name:h,address:i,local:j,domain:k},name:c(h),address:c(i),local:c(j),domain:c(k)});if(a.simple)for(e=e.addresses,d=0;d<e.length;d+=1)delete e[d].node;return e}var wa,xa,ya,za;if(a=e(a,{}),null===a)return null;if(wa=a.input,!a.strict){if(h(),a.strict=!0,za=Z(wa),a.partial||!b())return va(za);a.strict=!1}return h(),za=Z(wa),!a.partial&&b()?null:va(za)}function c(a){var c;return a=e(a,{rfc6532:!0,simple:!0}),null===a?null:(c=b(a),!c||!a.partial&&a.simple&&c.length>1||!a.simple&&c.addresses.length>1?null:a.simple?c&&c[0]:c&&c.addresses&&c.addresses[0])}function d(a){var c;return a=e(a,{rfc6532:!0,simple:!0}),null===a?null:(c=b(a),a.simple?c:c.addresses)}function e(a,b){function c(a){return"[object String]"===Object.prototype.toString.call(a)}function d(a){return a===Object(a)}function e(a){return null===a||void 0===a}var f,g;if(c(a))a={input:a};else if(!d(a))return null;if(!c(a.input))return null;if(!b)return null;f={rfc6532:!1,partial:!1,simple:!1,strict:!1,rejectTLD:!1};for(g in f)e(a[g])&&(a[g]=e(b[g])?f[g]:b[g]),a[g]=!!a[g];return a}b.parseOneAddress=c,b.parseAddressList=d,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=b:a.emailAddresses=b}(this);